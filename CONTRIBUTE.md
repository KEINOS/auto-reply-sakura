# CONTRIBUTE

不具合修正／リファクタリング／新機能追加があれば遠慮なく `Pull Request` ください。

## 前提条件

- GitHub のアカウントを持っている。
- `git` コマンドの操作の基本がわかる。
- `composer` コマンドの基本がわかる。
- `phpunit` を使ったことがある。
- オプショナル:
    - `Docker` および `docker-compose` コマンドが使える。

## 仕様

このリポジトリは PHPUnit を実行して、各種テストをパスしたら OK としています。

そのため機能追加および Issue 対応にはテストを作成してから実装してください。（詳しくは下記「テスト駆動型について」参照）

## 作業前の準備

1. [このリポジトリ](https://github.com/KEINOS/auto-reply-sakura)を自分のリポジトリに `Fork` する。
2. `Fork` したリポジトリをローカルに `clone` する。

以下 `Fork` 元のリポジトリを `upstream`、`Fork` 先のリポジトリを `origin`、`clone` したローカルのリポジトリを `local` とします。

## 基本的な作業の流れ

手をつけた Issue がある場合は、`origin` の作業ブランチを `draft` で `upsteam` に `PR` してしまってから作業してください。これは同じ作業のバッティングが発生しないようにするためです。

1. `local` で作業用のブランチを作成して `origin` に `push` する。ブランチ名は内容がわかりやすいものにする。
2. `origin` の作業ブランチを `upstream` の `master` ブランチに [Draft](https://github.blog/jp/2019-02-19-introducing-draft-pull-requests/) で `pull request` する。
3. `local` で作業を開始します。
4. コミットして `origin` に `push` します。（PR した Draft にも反映されます）
5. 「もういいでしょう」という状態になったら、PR 先で `draft` を外し、その旨を PR にコメントしてください。他のコントリビュータのレビューが行われます。
6. レビューで指摘があった場合は、修正＆ `push` を行います。
7. 管理者の判断、もしくは `LGTM` のコメント or `approved` が 2 件以上付くと `master` にマージされます。

## テスト駆動型について

このリポジトリは、ゆるいテスト駆動型開発を行なっています。つまり、先にテストを作成し、テストが失敗することを確認後、テストをパスするように実装していく流れです。

1. 新規機能（関数やメソッド）の追加や Issue（不具合など）対策で、期待する動作を確認するテストを書く。
2. 実装／対策前に**テストが失敗することを確認**する。
    - 新規関数やメソッドを追加する場合は、ダミーの値を返すだけの空の関数／メソッドを作る。
    - Issue 対応の場合は、現象が再現するテストを書く。再現した場合は `False` で失敗するようにする。
3. 作業前のコミットを行う。
4. テストを通るように実装を行う。（必要ならコミットする）
5. 実装が終わったら、作業内容をコミットして作業ブランチに `push` する。
